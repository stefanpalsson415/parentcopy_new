[debug] [2025-03-23T09:13:25.842Z] ----------------------------------------------------------------------
[debug] [2025-03-23T09:13:25.844Z] Command:       /opt/homebrew/Cellar/node/23.9.0/bin/node /opt/homebrew/bin/firebase deploy --only functions
[debug] [2025-03-23T09:13:25.844Z] CLI Version:   13.35.1
[debug] [2025-03-23T09:13:25.845Z] Platform:      darwin
[debug] [2025-03-23T09:13:25.845Z] Node Version:  v23.9.0
[debug] [2025-03-23T09:13:25.845Z] Time:          Sun Mar 23 2025 10:13:25 GMT+0100 (Central European Standard Time)
[debug] [2025-03-23T09:13:25.845Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-03-23T09:13:25.934Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-03-23T09:13:25.934Z] > authorizing via signed-in user (stefan@checkallie.com)
[debug] [2025-03-23T09:13:25.934Z] [iam] checking project parentload-ba995 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-03-23T09:13:25.934Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:25.934Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:25.935Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions [none]
[debug] [2025-03-23T09:13:25.935Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions x-goog-quota-user=projects/parentload-ba995
[debug] [2025-03-23T09:13:25.935Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-03-23T09:13:26.692Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions 200
[debug] [2025-03-23T09:13:26.692Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-03-23T09:13:26.692Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:26.692Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:26.692Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/parentload-ba995/serviceAccounts/parentload-ba995@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-03-23T09:13:26.692Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/parentload-ba995/serviceAccounts/parentload-ba995@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-03-23T09:13:27.448Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/parentload-ba995/serviceAccounts/parentload-ba995@appspot.gserviceaccount.com:testIamPermissions 404
[debug] [2025-03-23T09:13:27.448Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/parentload-ba995/serviceAccounts/parentload-ba995@appspot.gserviceaccount.com:testIamPermissions {"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}}
[debug] [2025-03-23T09:13:27.449Z] [functions] service account IAM check errored, deploy may fail: Request to https://iam.googleapis.com/v1/projects/parentload-ba995/serviceAccounts/parentload-ba995@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":404,"message":"Unknown service account","status":"NOT_FOUND"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://iam.googleapis.com/v1/projects/parentload-ba995/serviceAccounts/parentload-ba995@appspot.gserviceaccount.com:testIamPermissions had HTTP Error: 404, Unknown service account","status":404}
[info] 
[info] === Deploying to 'parentload-ba995'...
[info] 
[info] i  deploying functions 
[info] Running command: echo 'Skipping lint'
[info] ✔  functions: Finished running predeploy script. 
[debug] [2025-03-23T09:13:27.512Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:27.512Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:27.512Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995 [none]
[debug] [2025-03-23T09:13:27.724Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995 200
[debug] [2025-03-23T09:13:27.724Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995 {"projectNumber":"363935868004","projectId":"parentload-ba995","lifecycleState":"ACTIVE","name":"ParentLoad","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-02-27T13:12:19.141503Z","parent":{"type":"organization","id":"284212872409"}}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2025-03-23T09:13:27.726Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:27.726Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:27.726Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:27.726Z] Checked if tokens are valid: true, expires at: 1742723728882
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2025-03-23T09:13:27.726Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:27.726Z] Checked if tokens are valid: true, expires at: 1742723728882
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-03-23T09:13:27.726Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:27.726Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:27.726Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/cloudfunctions.googleapis.com [none]
[debug] [2025-03-23T09:13:27.727Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/parentload-ba995
[debug] [2025-03-23T09:13:27.728Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/runtimeconfig.googleapis.com [none]
[debug] [2025-03-23T09:13:27.728Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/parentload-ba995
[debug] [2025-03-23T09:13:27.729Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/cloudbuild.googleapis.com [none]
[debug] [2025-03-23T09:13:27.729Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/cloudbuild.googleapis.com x-goog-quota-user=projects/parentload-ba995
[debug] [2025-03-23T09:13:27.730Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/artifactregistry.googleapis.com [none]
[debug] [2025-03-23T09:13:27.730Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/artifactregistry.googleapis.com x-goog-quota-user=projects/parentload-ba995
[debug] [2025-03-23T09:13:28.693Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/cloudfunctions.googleapis.com 200
[debug] [2025-03-23T09:13:28.694Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2025-03-23T09:13:28.696Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/cloudbuild.googleapis.com 200
[debug] [2025-03-23T09:13:28.697Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2025-03-23T09:13:28.698Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/artifactregistry.googleapis.com 200
[debug] [2025-03-23T09:13:28.699Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2025-03-23T09:13:28.700Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/runtimeconfig.googleapis.com 200
[debug] [2025-03-23T09:13:28.700Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/runtimeconfig.googleapis.com [omitted]
[debug] [2025-03-23T09:13:28.700Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:28.700Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:28.700Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/parentload-ba995/adminSdkConfig [none]
[debug] [2025-03-23T09:13:29.145Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/parentload-ba995/adminSdkConfig 200
[debug] [2025-03-23T09:13:29.145Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/parentload-ba995/adminSdkConfig {"projectId":"parentload-ba995","storageBucket":"parentload-ba995.firebasestorage.app"}
[debug] [2025-03-23T09:13:29.146Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:29.146Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:29.146Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/parentload-ba995/configs [none]
[debug] [2025-03-23T09:13:29.488Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/parentload-ba995/configs 200
[debug] [2025-03-23T09:13:29.488Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/parentload-ba995/configs {"configs":[{"name":"projects/parentload-ba995/configs/claude"}]}
[debug] [2025-03-23T09:13:29.489Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:29.489Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:29.490Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/parentload-ba995/configs/claude/variables [none]
[debug] [2025-03-23T09:13:29.722Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/parentload-ba995/configs/claude/variables 200
[debug] [2025-03-23T09:13:29.722Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/parentload-ba995/configs/claude/variables {"variables":[{"name":"projects/parentload-ba995/configs/claude/variables/api_key","updateTime":"2025-03-22T20:47:25.585362809Z"}]}
[debug] [2025-03-23T09:13:29.723Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:29.723Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:29.723Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/parentload-ba995/configs/claude/variables/api_key [none]
[debug] [2025-03-23T09:13:29.934Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/parentload-ba995/configs/claude/variables/api_key 200
[debug] [2025-03-23T09:13:29.935Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/parentload-ba995/configs/claude/variables/api_key {"name":"projects/parentload-ba995/configs/claude/variables/api_key","updateTime":"2025-03-22T20:47:25.585362809Z","text":"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"}
[debug] [2025-03-23T09:13:29.938Z] Validating nodejs source
[warn] ⚠  functions: Runtime Node.js 18 will be deprecated on 2025-04-30 and will be decommissioned on 2025-10-31, after which you will not be able to deploy without upgrading. Consider upgrading now to avoid disruption. See https://cloud.google.com/functions/docs/runtime-support for full details on the lifecycle policy 
[debug] [2025-03-23T09:13:30.386Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "axios": "^1.8.4",
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^6.0.1"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-03-23T09:13:30.386Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-03-23T09:13:30.387Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-03-23T09:13:30.391Z] Found firebase-functions binary at '/Users/stefanpalsson/parentload copy/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8652

[debug] [2025-03-23T09:13:30.697Z] Got response from /__/functions.yaml {"endpoints":{"callClaudeAPI":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"callClaudeAPI"},"testClaudeAPI":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"testClaudeAPI"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-03-23T09:13:34.723Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:34.723Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:34.723Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/firebaseextensions.googleapis.com [none]
[debug] [2025-03-23T09:13:34.723Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/parentload-ba995
[debug] [2025-03-23T09:13:35.647Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/firebaseextensions.googleapis.com 200
[debug] [2025-03-23T09:13:35.648Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/firebaseextensions.googleapis.com [omitted]
[info] ✔  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2025-03-23T09:13:35.648Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-03-23T09:13:35.649Z] > authorizing via signed-in user (stefan@checkallie.com)
[debug] [2025-03-23T09:13:35.649Z] [iam] checking project parentload-ba995 for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-03-23T09:13:35.649Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:35.649Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:35.649Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions [none]
[debug] [2025-03-23T09:13:35.649Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions x-goog-quota-user=projects/parentload-ba995
[debug] [2025-03-23T09:13:35.649Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-03-23T09:13:36.390Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions 200
[debug] [2025-03-23T09:13:36.390Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-03-23T09:13:36.391Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:36.391Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:36.392Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/parentload-ba995/instances pageSize=100&pageToken=
[debug] [2025-03-23T09:13:37.308Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/parentload-ba995/instances 200
[debug] [2025-03-23T09:13:37.309Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/parentload-ba995/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/stefanpalsson/parentload copy/functions (64.44 KB) for uploading 
[debug] [2025-03-23T09:13:37.341Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:37.341Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:37.341Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/parentload-ba995/locations/-/functions [none]
[debug] [2025-03-23T09:13:38.087Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/parentload-ba995/locations/-/functions 200
[debug] [2025-03-23T09:13:38.087Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/parentload-ba995/locations/-/functions {}
[debug] [2025-03-23T09:13:38.088Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:38.088Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:38.088Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-03-23T09:13:39.173Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/-/functions 200
[debug] [2025-03-23T09:13:39.173Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/-/functions {}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2025-03-23T09:13:39.176Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:39.176Z] Checked if tokens are valid: true, expires at: 1742723728882
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2025-03-23T09:13:39.177Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:39.177Z] Checked if tokens are valid: true, expires at: 1742723728882
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2025-03-23T09:13:39.177Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:39.177Z] Checked if tokens are valid: true, expires at: 1742723728882
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2025-03-23T09:13:39.177Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:39.177Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:39.177Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/run.googleapis.com [none]
[debug] [2025-03-23T09:13:39.177Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/run.googleapis.com x-goog-quota-user=projects/parentload-ba995
[debug] [2025-03-23T09:13:39.178Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/eventarc.googleapis.com [none]
[debug] [2025-03-23T09:13:39.178Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/eventarc.googleapis.com x-goog-quota-user=projects/parentload-ba995
[debug] [2025-03-23T09:13:39.179Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/pubsub.googleapis.com [none]
[debug] [2025-03-23T09:13:39.179Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/pubsub.googleapis.com x-goog-quota-user=projects/parentload-ba995
[debug] [2025-03-23T09:13:39.180Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/storage.googleapis.com [none]
[debug] [2025-03-23T09:13:39.180Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/storage.googleapis.com x-goog-quota-user=projects/parentload-ba995
[debug] [2025-03-23T09:13:39.545Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/run.googleapis.com 200
[debug] [2025-03-23T09:13:39.545Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/run.googleapis.com [omitted]
[info] ✔  functions: required API run.googleapis.com is enabled 
[debug] [2025-03-23T09:13:40.057Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/eventarc.googleapis.com 200
[debug] [2025-03-23T09:13:40.058Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/eventarc.googleapis.com [omitted]
[info] ✔  functions: required API eventarc.googleapis.com is enabled 
[debug] [2025-03-23T09:13:40.073Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/pubsub.googleapis.com 200
[debug] [2025-03-23T09:13:40.073Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/pubsub.googleapis.com [omitted]
[info] ✔  functions: required API pubsub.googleapis.com is enabled 
[debug] [2025-03-23T09:13:40.092Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/storage.googleapis.com 200
[debug] [2025-03-23T09:13:40.093Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/parentload-ba995/services/storage.googleapis.com [omitted]
[info] ✔  functions: required API storage.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-03-23T09:13:40.093Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:40.093Z] Checked if tokens are valid: true, expires at: 1742723728882
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-03-23T09:13:40.093Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:40.093Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:40.093Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/363935868004/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-03-23T09:13:40.094Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/363935868004/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-03-23T09:13:41.014Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/363935868004/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-03-23T09:13:41.014Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/363935868004/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-363935868004@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"116147551751171565277"}}
[debug] [2025-03-23T09:13:41.068Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/363935868004/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-03-23T09:13:41.069Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/363935868004/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-363935868004@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"115541604897050846611"}}
[debug] [2025-03-23T09:13:41.071Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:41.071Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:41.071Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995 [none]
[debug] [2025-03-23T09:13:41.262Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995 200
[debug] [2025-03-23T09:13:41.262Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995 {"projectNumber":"363935868004","projectId":"parentload-ba995","lifecycleState":"ACTIVE","name":"ParentLoad","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-02-27T13:12:19.141503Z","parent":{"type":"organization","id":"284212872409"}}
[debug] [2025-03-23T09:13:41.264Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:41.264Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:41.264Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/parentload-ba995/billingInfo [none]
[debug] [2025-03-23T09:13:42.267Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/parentload-ba995/billingInfo 200
[debug] [2025-03-23T09:13:42.267Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/parentload-ba995/billingInfo {"name":"projects/parentload-ba995/billingInfo","projectId":"parentload-ba995","billingAccountName":"billingAccounts/017FF6-9F3BE0-84BBCB","billingEnabled":true}
[debug] [2025-03-23T09:13:42.268Z] [functions] found 1 new HTTP functions, testing setIamPolicy permission...
[debug] [2025-03-23T09:13:42.269Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:42.269Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:42.269Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions [none]
[debug] [2025-03-23T09:13:42.269Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions x-goog-quota-user=projects/parentload-ba995
[debug] [2025-03-23T09:13:42.269Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions {"permissions":["cloudfunctions.functions.setIamPolicy"]}
[debug] [2025-03-23T09:13:42.435Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions 200
[debug] [2025-03-23T09:13:42.436Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/parentload-ba995:testIamPermissions {"permissions":["cloudfunctions.functions.setIamPolicy"]}
[debug] [2025-03-23T09:13:42.436Z] [functions] found setIamPolicy permission, proceeding with deploy
[debug] [2025-03-23T09:13:42.437Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:42.437Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:42.437Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-03-23T09:13:43.360Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-03-23T09:13:43.360Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-363935868004.us-central1.cloudfunctions.appspot.com/637da5cb-2c34-4730-b323-099cd4a25419.zip?GoogleAccessId=service-363935868004@gcf-admin-robot.iam.gserviceaccount.com&Expires=1742723023&Signature=Z200osXw4hthIFFuySvrFHhxBhYi06w8mEMXUaMzGzWkEEA4ZGxu8jz3a31hCSTk%2B8KH5WF2mMIgGJHG6AfqrZFivi%2BAr1WZ4nnWjOo5iFyFRfXOW2NnhYbWdcfSYyi2qIHZiBunCjA%2BUF2VW0qW7dm0Y4u6v%2BQJRBqxi9zGHG0UsPWDxHYOCWgdnVCm0IgwZAVJQmugxF6UlTxPgJNt5GdB5gJFk8EHj5xuACvxdFSCHJrIqEEkhFpPk%2BNOZnCoPAQ4TyQ7eedN2BWc5RZadFEXSHWPcuBXTF3PqmL7Th4nC48oIJATnQdfsjPzgMsayl5ih3cb%2BUER9pFNmnHwYQ%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-363935868004.us-central1.cloudfunctions.appspot.com","object":"637da5cb-2c34-4730-b323-099cd4a25419.zip"}}
[debug] [2025-03-23T09:13:43.361Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-363935868004.us-central1.cloudfunctions.appspot.com/637da5cb-2c34-4730-b323-099cd4a25419.zip GoogleAccessId=service-363935868004%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1742723023&Signature=Z200osXw4hthIFFuySvrFHhxBhYi06w8mEMXUaMzGzWkEEA4ZGxu8jz3a31hCSTk%2B8KH5WF2mMIgGJHG6AfqrZFivi%2BAr1WZ4nnWjOo5iFyFRfXOW2NnhYbWdcfSYyi2qIHZiBunCjA%2BUF2VW0qW7dm0Y4u6v%2BQJRBqxi9zGHG0UsPWDxHYOCWgdnVCm0IgwZAVJQmugxF6UlTxPgJNt5GdB5gJFk8EHj5xuACvxdFSCHJrIqEEkhFpPk%2BNOZnCoPAQ4TyQ7eedN2BWc5RZadFEXSHWPcuBXTF3PqmL7Th4nC48oIJATnQdfsjPzgMsayl5ih3cb%2BUER9pFNmnHwYQ%3D%3D
[debug] [2025-03-23T09:13:43.361Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-363935868004.us-central1.cloudfunctions.appspot.com/637da5cb-2c34-4730-b323-099cd4a25419.zip [stream]
[debug] [2025-03-23T09:13:44.472Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-363935868004.us-central1.cloudfunctions.appspot.com/637da5cb-2c34-4730-b323-099cd4a25419.zip 200
[debug] [2025-03-23T09:13:44.472Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-363935868004.us-central1.cloudfunctions.appspot.com/637da5cb-2c34-4730-b323-099cd4a25419.zip [omitted]
[info] ✔  functions: functions folder uploaded successfully 
[info] i  functions: creating Node.js 18 (2nd Gen) function callClaudeAPI(us-central1)... 
[info] i  functions: creating Node.js 18 (2nd Gen) function testClaudeAPI(us-central1)... 
[debug] [2025-03-23T09:13:44.478Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:44.478Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:44.478Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/functions functionId=callClaudeAPI
[debug] [2025-03-23T09:13:44.478Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/functions {"name":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"callClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-uploads-363935868004.us-central1.cloudfunctions.appspot.com","object":"637da5cb-2c34-4730-b323-099cd4a25419.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/callClaudeAPI","FUNCTION_TARGET":"callClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"}}
[debug] [2025-03-23T09:13:45.807Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/functions 200
[debug] [2025-03-23T09:13:45.808Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/functions {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:13:45.725360455Z","target":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-03-23T09:13:45.809Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:45.810Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:45.810Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae [none]
[debug] [2025-03-23T09:13:46.642Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae 200
[debug] [2025-03-23T09:13:46.643Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:13:45.725360455Z","target":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"callClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-sources-363935868004-us-central1","object":"callClaudeAPI/function-source.zip","generation":"1742721225511259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/parentload-ba995/serviceAccounts/363935868004-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/parentload-ba995/locations/us-central1/services/callclaudeapi","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/callClaudeAPI","FUNCTION_TARGET":"callClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"363935868004-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Creating build","state":"IN_PROGRESS","resource":"projects/363935868004/locations/us-central1/builds/121b4cf2-9f96-49d4-b074-9d1ac77c2028","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/121b4cf2-9f96-49d4-b074-9d1ac77c2028?project=363935868004"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/363935868004/locations/us-central1/builds/121b4cf2-9f96-49d4-b074-9d1ac77c2028"},"done":false}
[debug] [2025-03-23T09:13:47.146Z] [create-default-us-central1-callClaudeAPI] Retrying task index 0
[debug] [2025-03-23T09:13:47.147Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:47.147Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:47.148Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae [none]
[debug] [2025-03-23T09:13:48.021Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae 200
[debug] [2025-03-23T09:13:48.022Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:13:45.725360455Z","target":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"callClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-sources-363935868004-us-central1","object":"callClaudeAPI/function-source.zip","generation":"1742721225511259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/parentload-ba995/serviceAccounts/363935868004-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/parentload-ba995/locations/us-central1/services/callclaudeapi","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/callClaudeAPI","FUNCTION_TARGET":"callClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"363935868004-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/363935868004/locations/us-central1/builds/121b4cf2-9f96-49d4-b074-9d1ac77c2028","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/121b4cf2-9f96-49d4-b074-9d1ac77c2028?project=363935868004"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/363935868004/locations/us-central1/builds/121b4cf2-9f96-49d4-b074-9d1ac77c2028"},"done":false}
[debug] [2025-03-23T09:13:49.023Z] [create-default-us-central1-callClaudeAPI] Retrying task index 0
[debug] [2025-03-23T09:13:49.025Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:49.025Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:49.025Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae [none]
[debug] [2025-03-23T09:13:49.877Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae 200
[debug] [2025-03-23T09:13:49.878Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:13:45.725360455Z","target":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"callClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-sources-363935868004-us-central1","object":"callClaudeAPI/function-source.zip","generation":"1742721225511259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/parentload-ba995/serviceAccounts/363935868004-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/parentload-ba995/locations/us-central1/services/callclaudeapi","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/callClaudeAPI","FUNCTION_TARGET":"callClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"363935868004-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/363935868004/locations/us-central1/builds/121b4cf2-9f96-49d4-b074-9d1ac77c2028","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/121b4cf2-9f96-49d4-b074-9d1ac77c2028?project=363935868004"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/363935868004/locations/us-central1/builds/121b4cf2-9f96-49d4-b074-9d1ac77c2028"},"done":false}
[debug] [2025-03-23T09:13:51.879Z] [create-default-us-central1-callClaudeAPI] Retrying task index 0
[debug] [2025-03-23T09:13:51.881Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:51.881Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:51.881Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae [none]
[debug] [2025-03-23T09:13:52.066Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae 200
[debug] [2025-03-23T09:13:52.066Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:13:45.725360455Z","target":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"callClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-sources-363935868004-us-central1","object":"callClaudeAPI/function-source.zip","generation":"1742721225511259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/parentload-ba995/serviceAccounts/363935868004-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/parentload-ba995/locations/us-central1/services/callclaudeapi","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/callClaudeAPI","FUNCTION_TARGET":"callClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"363935868004-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/363935868004/locations/us-central1/builds/121b4cf2-9f96-49d4-b074-9d1ac77c2028","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/121b4cf2-9f96-49d4-b074-9d1ac77c2028?project=363935868004"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/363935868004/locations/us-central1/builds/121b4cf2-9f96-49d4-b074-9d1ac77c2028"},"done":false}
[debug] [2025-03-23T09:13:56.069Z] [create-default-us-central1-callClaudeAPI] Retrying task index 0
[debug] [2025-03-23T09:13:56.070Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:56.070Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:13:56.071Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae [none]
[debug] [2025-03-23T09:13:56.918Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae 200
[debug] [2025-03-23T09:13:56.919Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:13:45.725360455Z","target":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"callClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-sources-363935868004-us-central1","object":"callClaudeAPI/function-source.zip","generation":"1742721225511259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/parentload-ba995/serviceAccounts/363935868004-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/parentload-ba995/locations/us-central1/services/callclaudeapi","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/callClaudeAPI","FUNCTION_TARGET":"callClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"363935868004-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/363935868004/locations/us-central1/builds/121b4cf2-9f96-49d4-b074-9d1ac77c2028","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/121b4cf2-9f96-49d4-b074-9d1ac77c2028?project=363935868004"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/363935868004/locations/us-central1/builds/121b4cf2-9f96-49d4-b074-9d1ac77c2028"},"done":false}
[debug] [2025-03-23T09:14:04.919Z] [create-default-us-central1-callClaudeAPI] Retrying task index 0
[debug] [2025-03-23T09:14:04.920Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:04.920Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:04.920Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae [none]
[debug] [2025-03-23T09:14:05.795Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae 200
[debug] [2025-03-23T09:14:05.795Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:13:45.725360455Z","target":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"callClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-sources-363935868004-us-central1","object":"callClaudeAPI/function-source.zip","generation":"1742721225511259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/parentload-ba995/serviceAccounts/363935868004-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/parentload-ba995/locations/us-central1/services/callclaudeapi","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/callClaudeAPI","FUNCTION_TARGET":"callClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"363935868004-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/363935868004/locations/us-central1/builds/121b4cf2-9f96-49d4-b074-9d1ac77c2028","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/121b4cf2-9f96-49d4-b074-9d1ac77c2028?project=363935868004"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/363935868004/locations/us-central1/builds/121b4cf2-9f96-49d4-b074-9d1ac77c2028"},"done":false}
[debug] [2025-03-23T09:14:15.797Z] [create-default-us-central1-callClaudeAPI] Retrying task index 0
[debug] [2025-03-23T09:14:15.798Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:15.798Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:15.798Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae [none]
[debug] [2025-03-23T09:14:16.747Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae 200
[debug] [2025-03-23T09:14:16.747Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721225236-630fee792a0da-f0b75522-78b722ae","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:13:45.725360455Z","endTime":"2025-03-23T09:14:08.124892938Z","target":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/parentload-ba995/locations/us-central1/functions/callClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"callClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-sources-363935868004-us-central1","object":"callClaudeAPI/function-source.zip","generation":"1742721225511259"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/parentload-ba995/serviceAccounts/363935868004-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/parentload-ba995/locations/us-central1/services/callclaudeapi","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/callClaudeAPI","FUNCTION_TARGET":"callClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"363935868004-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","deployment-callable":"true","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"},"environment":"GEN_2"},"stages":[{"name":"ARTIFACT_REGISTRY","message":"Deleting function artifacts in Artifact Registry","state":"COMPLETE"},{"name":"SERVICE","message":"Deleting Cloud Run service","state":"COMPLETE","resource":"projects/parentload-ba995/locations/us-central1/services/callclaudeapi"}],"operationType":"CREATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account\n You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/121b4cf2-9f96-49d4-b074-9d1ac77c2028?project=363935868004.\n"}}
[debug] [2025-03-23T09:14:16.748Z] Got source token undefined for region us-central1
[debug] [2025-03-23T09:14:16.749Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:16.749Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:16.749Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/functions functionId=testClaudeAPI
[debug] [2025-03-23T09:14:16.750Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/functions {"name":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"testClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-uploads-363935868004.us-central1.cloudfunctions.appspot.com","object":"637da5cb-2c34-4730-b323-099cd4a25419.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/testClaudeAPI","FUNCTION_TARGET":"testClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"}}
[error] Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account
 You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/121b4cf2-9f96-49d4-b074-9d1ac77c2028?project=363935868004.

[debug] [2025-03-23T09:14:18.230Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/functions 200
[debug] [2025-03-23T09:14:18.231Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/functions {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:14:18.098778651Z","target":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-03-23T09:14:18.231Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:18.231Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:18.232Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b [none]
[debug] [2025-03-23T09:14:19.149Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b 200
[debug] [2025-03-23T09:14:19.150Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:14:18.098778651Z","target":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"testClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-sources-363935868004-us-central1","object":"testClaudeAPI/function-source.zip","generation":"1742721257864220"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/parentload-ba995/serviceAccounts/363935868004-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/parentload-ba995/locations/us-central1/services/testclaudeapi","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/testClaudeAPI","FUNCTION_TARGET":"testClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"363935868004-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Creating build","state":"IN_PROGRESS","resource":"projects/363935868004/locations/us-central1/builds/7cd060a9-5457-47df-860f-32b28e28c984","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/7cd060a9-5457-47df-860f-32b28e28c984?project=363935868004"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/363935868004/locations/us-central1/builds/7cd060a9-5457-47df-860f-32b28e28c984"},"done":false}
[debug] [2025-03-23T09:14:19.651Z] [create-default-us-central1-testClaudeAPI] Retrying task index 0
[debug] [2025-03-23T09:14:19.652Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:19.653Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:19.653Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b [none]
[debug] [2025-03-23T09:14:20.704Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b 200
[debug] [2025-03-23T09:14:20.704Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:14:18.098778651Z","target":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"testClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-sources-363935868004-us-central1","object":"testClaudeAPI/function-source.zip","generation":"1742721257864220"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/parentload-ba995/serviceAccounts/363935868004-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/parentload-ba995/locations/us-central1/services/testclaudeapi","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/testClaudeAPI","FUNCTION_TARGET":"testClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"363935868004-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/363935868004/locations/us-central1/builds/7cd060a9-5457-47df-860f-32b28e28c984","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/7cd060a9-5457-47df-860f-32b28e28c984?project=363935868004"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/363935868004/locations/us-central1/builds/7cd060a9-5457-47df-860f-32b28e28c984"},"done":false}
[debug] [2025-03-23T09:14:21.707Z] [create-default-us-central1-testClaudeAPI] Retrying task index 0
[debug] [2025-03-23T09:14:21.710Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:21.710Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:21.710Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b [none]
[debug] [2025-03-23T09:14:22.561Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b 200
[debug] [2025-03-23T09:14:22.561Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:14:18.098778651Z","target":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"testClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-sources-363935868004-us-central1","object":"testClaudeAPI/function-source.zip","generation":"1742721257864220"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/parentload-ba995/serviceAccounts/363935868004-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/parentload-ba995/locations/us-central1/services/testclaudeapi","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/testClaudeAPI","FUNCTION_TARGET":"testClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"363935868004-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/363935868004/locations/us-central1/builds/7cd060a9-5457-47df-860f-32b28e28c984","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/7cd060a9-5457-47df-860f-32b28e28c984?project=363935868004"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/363935868004/locations/us-central1/builds/7cd060a9-5457-47df-860f-32b28e28c984"},"done":false}
[debug] [2025-03-23T09:14:24.563Z] [create-default-us-central1-testClaudeAPI] Retrying task index 0
[debug] [2025-03-23T09:14:24.563Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:24.563Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:24.563Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b [none]
[debug] [2025-03-23T09:14:25.402Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b 200
[debug] [2025-03-23T09:14:25.402Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:14:18.098778651Z","target":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"testClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-sources-363935868004-us-central1","object":"testClaudeAPI/function-source.zip","generation":"1742721257864220"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/parentload-ba995/serviceAccounts/363935868004-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/parentload-ba995/locations/us-central1/services/testclaudeapi","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/testClaudeAPI","FUNCTION_TARGET":"testClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"363935868004-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/363935868004/locations/us-central1/builds/7cd060a9-5457-47df-860f-32b28e28c984","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/7cd060a9-5457-47df-860f-32b28e28c984?project=363935868004"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/363935868004/locations/us-central1/builds/7cd060a9-5457-47df-860f-32b28e28c984"},"done":false}
[debug] [2025-03-23T09:14:29.402Z] [create-default-us-central1-testClaudeAPI] Retrying task index 0
[debug] [2025-03-23T09:14:29.403Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:29.403Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:29.403Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b [none]
[debug] [2025-03-23T09:14:30.313Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b 200
[debug] [2025-03-23T09:14:30.313Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:14:18.098778651Z","target":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"testClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-sources-363935868004-us-central1","object":"testClaudeAPI/function-source.zip","generation":"1742721257864220"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/parentload-ba995/serviceAccounts/363935868004-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/parentload-ba995/locations/us-central1/services/testclaudeapi","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/testClaudeAPI","FUNCTION_TARGET":"testClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"363935868004-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"},"environment":"GEN_2"},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/363935868004/locations/us-central1/builds/7cd060a9-5457-47df-860f-32b28e28c984","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/7cd060a9-5457-47df-860f-32b28e28c984?project=363935868004"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"CREATE_FUNCTION","buildName":"projects/363935868004/locations/us-central1/builds/7cd060a9-5457-47df-860f-32b28e28c984"},"done":false}
[debug] [2025-03-23T09:14:38.315Z] [create-default-us-central1-testClaudeAPI] Retrying task index 0
[debug] [2025-03-23T09:14:38.321Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:38.321Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:38.321Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b [none]
[debug] [2025-03-23T09:14:39.188Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b 200
[debug] [2025-03-23T09:14:39.188Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b {"name":"projects/parentload-ba995/locations/us-central1/operations/operation-1742721257535-630fee97f771c-03027bfe-ec3e267b","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-23T09:14:18.098778651Z","endTime":"2025-03-23T09:14:35.626819912Z","target":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","verb":"create","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/parentload-ba995/locations/us-central1/functions/testClaudeAPI","buildConfig":{"runtime":"nodejs18","entryPoint":"testClaudeAPI","source":{"storageSource":{"bucket":"gcf-v2-sources-363935868004-us-central1","object":"testClaudeAPI/function-source.zip","generation":"1742721257864220"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"serviceAccount":"projects/parentload-ba995/serviceAccounts/363935868004-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/parentload-ba995/locations/us-central1/services/testclaudeapi","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}","GCLOUD_PROJECT":"parentload-ba995","EVENTARC_CLOUD_EVENT_SOURCE":"projects/parentload-ba995/locations/us-central1/services/testClaudeAPI","FUNCTION_TARGET":"testClaudeAPI","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","serviceAccountEmail":"363935868004-compute@developer.gserviceaccount.com","availableMemory":"256Mi","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"},"environment":"GEN_2"},"stages":[{"name":"ARTIFACT_REGISTRY","message":"Deleting function artifacts in Artifact Registry","state":"COMPLETE"},{"name":"SERVICE","message":"Deleting Cloud Run service","state":"COMPLETE","resource":"projects/parentload-ba995/locations/us-central1/services/testclaudeapi"}],"operationType":"CREATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account\n You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/7cd060a9-5457-47df-860f-32b28e28c984?project=363935868004.\n"}}
[debug] [2025-03-23T09:14:39.188Z] Got source token undefined for region us-central1
[error] Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account
 You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/7cd060a9-5457-47df-860f-32b28e28c984?project=363935868004.

[debug] [2025-03-23T09:14:39.192Z] Total Function Deployment time: 54713
[debug] [2025-03-23T09:14:39.192Z] 2 Functions Deployed
[debug] [2025-03-23T09:14:39.192Z] 2 Functions Errored
[debug] [2025-03-23T09:14:39.192Z] 0 Function Deployments Aborted
[debug] [2025-03-23T09:14:39.192Z] Average Function Deployment time: 43493
[info] 
[info] Functions deploy had errors with the following functions:
	callClaudeAPI(us-central1)
	testClaudeAPI(us-central1)
[debug] [2025-03-23T09:14:39.251Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[info] i  functions: cleaning up build files... 
[debug] [2025-03-23T09:14:39.251Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:39.251Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:39.251Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:39.251Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:39.251Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:39.251Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:39.251Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1/projects/parentload-ba995/locations/us-central1/repositories/gcf-artifacts/packages/parentload--ba995__us--central1__call_claude_a_p_i [none]
[debug] [2025-03-23T09:14:39.252Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1/projects/parentload-ba995/locations/us-central1/repositories/gcf-artifacts/packages/parentload--ba995__us--central1__test_claude_a_p_i [none]
[debug] [2025-03-23T09:14:39.252Z] >>> [apiv2][query] GET https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list [none]
[debug] [2025-03-23T09:14:39.624Z] <<< [apiv2][status] GET https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list 404
[debug] [2025-03-23T09:14:39.624Z] <<< [apiv2][body] GET https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2025-03-23T09:14:39.625Z] Failed docker command with error  Request to https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2025-03-23T09:14:39.626Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:39.627Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:39.627Z] >>> [apiv2][query] GET https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list [none]
[debug] [2025-03-23T09:14:39.950Z] <<< [apiv2][status] GET https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list 404
[debug] [2025-03-23T09:14:39.950Z] <<< [apiv2][body] GET https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2025-03-23T09:14:39.950Z] Failed docker command with error  Request to https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2025-03-23T09:14:40.058Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:40.058Z] Checked if tokens are valid: true, expires at: 1742723728882
[debug] [2025-03-23T09:14:40.058Z] >>> [apiv2][query] GET https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list [none]
[debug] [2025-03-23T09:14:40.137Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1/projects/parentload-ba995/locations/us-central1/repositories/gcf-artifacts/packages/parentload--ba995__us--central1__call_claude_a_p_i 404
[debug] [2025-03-23T09:14:40.137Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1/projects/parentload-ba995/locations/us-central1/repositories/gcf-artifacts/packages/parentload--ba995__us--central1__call_claude_a_p_i {"error":{"code":404,"message":"Package \"projects/parentload-ba995/locations/us-central1/repositories/gcf-artifacts/packages/parentload--ba995__us--central1__call_claude_a_p_i\" was not found.","status":"NOT_FOUND"}}
[debug] [2025-03-23T09:14:40.160Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1/projects/parentload-ba995/locations/us-central1/repositories/gcf-artifacts/packages/parentload--ba995__us--central1__test_claude_a_p_i 404
[debug] [2025-03-23T09:14:40.160Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1/projects/parentload-ba995/locations/us-central1/repositories/gcf-artifacts/packages/parentload--ba995__us--central1__test_claude_a_p_i {"error":{"code":404,"message":"Package \"projects/parentload-ba995/locations/us-central1/repositories/gcf-artifacts/packages/parentload--ba995__us--central1__test_claude_a_p_i\" was not found.","status":"NOT_FOUND"}}
[debug] [2025-03-23T09:14:40.335Z] <<< [apiv2][status] GET https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list 404
[debug] [2025-03-23T09:14:40.335Z] <<< [apiv2][body] GET https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2025-03-23T09:14:40.335Z] Failed docker command with error  Request to https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/parentload-ba995/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[warn] ⚠  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/gcr/images/parentload-ba995/us/gcf 
[debug] [2025-03-23T09:14:40.336Z] Functions deploy failed.
[debug] [2025-03-23T09:14:40.336Z] {
  "endpoint": {
    "id": "callClaudeAPI",
    "project": "parentload-ba995",
    "region": "us-central1",
    "entryPoint": "callClaudeAPI",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "callableTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "parentload-ba995",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/parentload-ba995/locations/us-central1/services/callClaudeAPI"
    },
    "codebase": "default",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account\n You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/121b4cf2-9f96-49d4-b074-9d1ac77c2028?project=363935868004.\n",
    "original": {
      "code": 3,
      "message": "Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account\n You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/121b4cf2-9f96-49d4-b074-9d1ac77c2028?project=363935868004.\n"
    },
    "status": 3,
    "code": 3
  }
}
[debug] [2025-03-23T09:14:40.336Z] {
  "endpoint": {
    "id": "testClaudeAPI",
    "project": "parentload-ba995",
    "region": "us-central1",
    "entryPoint": "testClaudeAPI",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "httpsTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"parentload-ba995\",\"storageBucket\":\"parentload-ba995.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "parentload-ba995",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/parentload-ba995/locations/us-central1/services/testClaudeAPI"
    },
    "codebase": "default",
    "cpu": 1,
    "targetedByOnly": false,
    "hash": "7f0e2ae2b167c940fbccb3a60f33835f9e19d70d"
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account\n You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/7cd060a9-5457-47df-860f-32b28e28c984?project=363935868004.\n",
    "original": {
      "code": 3,
      "message": "Build failed with status: FAILURE. Could not build the function due to a missing permission on the build service account. If you didn't revoke that permission explicitly, this could be caused by a change in the organization policies. Please refer to the following documentation for more details and resolution: https://cloud.google.com/functions/docs/troubleshooting#build-service-account\n You can also view the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/7cd060a9-5457-47df-860f-32b28e28c984?project=363935868004.\n"
    },
    "status": 3,
    "code": 3
  }
}
[error] Error: There was an error deploying functions:
[error] - Error Failed to create function callClaudeAPI in region us-central1
[error] - Error Failed to create function testClaudeAPI in region us-central1
